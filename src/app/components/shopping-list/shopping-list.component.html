<div class="shopping-list-container">
  <div class="selected-items">
    <div class="header-row">
      <h2>Shopping List ({{ selectedRecipes.length }})</h2>
      @if (selectedRecipes.length > 0) {
        <button
          pButton
          type="button"
          label="Clear All"
          (click)="clearAll()"
          icon="pi pi-trash"
          class="clear-all-btn"
          severity="danger"
          size="small">
        </button>
      }
    </div>
    @if (selectedRecipes.length === 0) {
      <p class="empty-message">Add recipes or groceries to build your list</p>
    } @else {
      <div class="items-list">
        @for (item of selectedRecipes; track item.name) {
          <div class="item-row">
            <div class="item-info">
              <span class="item-name">{{ item.name }}</span>
            </div>
            <div class="store-buttons">
              @for (store of stores; track store) {
                <button
                  pButton
                  type="button"
                  [label]="store"
                  (click)="selectStore(item, store)"
                  [class.selected]="item.store === store"
                  class="store-button"
                  size="small">
                </button>
              }
              <button
                pButton
                type="button"
                icon="pi pi-times"
                (click)="removeItem(item)"
                class="remove-button"
                size="small"
                severity="danger">
              </button>
            </div>
          </div>
        }
      </div>
      <button
        pButton
        type="button"
        label="Shop!"
        (click)="generateShoppingList()"
        icon="pi pi-shopping-cart"
        class="generate-button"
        severity="success">
      </button>
    }
  </div>

  <app-shopping-list-modal
    [(visible)]="showShoppingListModal"
    [shoppingList]="finalShoppingList">
  </app-shopping-list-modal>
</div>